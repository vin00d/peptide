---

title: Basics


keywords: fastai
sidebar: home_sidebar

summary: "Setup GPU, default paths & global variables."
description: "Setup GPU, default paths & global variables."
nb_path: "00_basics.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_basics.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Every file in the library imports this, so all global set up required everywhere can be added here.</p>
<ol>
<li>Sets up device to GPU if available.</li>
<li>Defines default paths for different stores - so that they are out of version control by default.</li>
<li>Global scope variables - for convenience in other modules.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="GPU">GPU<a class="anchor-link" href="#GPU"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_device" class="doc_header"><code>get_device</code><a href="https://github.com/vin00d/peptide/tree/master/peptide/basics.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_device</code>()</p>
</blockquote>
<p>Checks to see if GPU is available and sets device to GPU or CPU</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_device</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;Checks to see if GPU is available and sets device to GPU or CPU&#39;&#39;&#39;</span>
    <span class="n">use_cuda</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">use_cuda</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">torch</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">cudnn</span><span class="o">.</span><span class="n">enabled</span> <span class="o">==</span> <span class="kc">True</span>
        <span class="n">torch</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">cudnn</span><span class="o">.</span><span class="n">benchmark</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1">#Enable cuDNN auto-tuner - perf benefit for convs</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Settings-File">Settings File<a class="anchor-link" href="#Settings-File"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A YAML file called <a href="/peptide/basics.html#settings.yaml"><code>settings.yaml</code></a> is created (from a template) the first time the library is used.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="settings_template" class="doc_header"><code>settings_template</code><a href="https://github.com/vin00d/peptide/tree/master/peptide/basics.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>settings_template</code>()</p>
</blockquote>
<p>Create initial settings for library</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_settings" class="doc_header"><code>read_settings</code><a href="https://github.com/vin00d/peptide/tree/master/peptide/basics.py#L46" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_settings</code>()</p>
</blockquote>
<p>Read settings file at "~/.peptide/settings.yaml", if doesnt exist, create it from template</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Global-Scope-Variables">Global Scope Variables<a class="anchor-link" href="#Global-Scope-Variables"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">DEVICE</span> <span class="o">=</span> <span class="n">get_device</span><span class="p">()</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">()</span>

<span class="n">DATA_STORE</span>         <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">STORES</span><span class="o">.</span><span class="n">DATA_STORE</span>
<span class="n">LOG_STORE</span>          <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">STORES</span><span class="o">.</span><span class="n">LOG_STORE</span>
<span class="n">MODEL_STORE</span>        <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">STORES</span><span class="o">.</span><span class="n">MODEL_STORE</span>
<span class="n">EXPERIMENT_STORE</span>   <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">STORES</span><span class="o">.</span><span class="n">EXPERIMENT_STORE</span>

<span class="n">PATH_AMP</span>   <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">DATA_STORE</span><span class="si">}</span><span class="s1">/amp&#39;</span>
<span class="n">PATH_ACP</span>  <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">DATA_STORE</span><span class="si">}</span><span class="s1">/acp&#39;</span>
<span class="n">PATH_DNA_BINDING</span>  <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">DATA_STORE</span><span class="si">}</span><span class="s1">/dna_binding&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>No settings file found, so creating from template ..
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Copy-Datasets-Into-DataStore">Copy Datasets Into DataStore<a class="anchor-link" href="#Copy-Datasets-Into-DataStore"> </a></h2><ul>
<li>Copy dataset directories into the location pointed to by the <code>DATASTORE</code> global variable<ul>
<li>for example <code>~/.peptide/datasets</code></li>
</ul>
</li>
<li>Resulting folder structure will be<ul>
<li><code>~/.peptide/datasets/acp/train_data.csv</code></li>
<li><code>~/.peptide/datasets/amp/all_data.csv</code></li>
<li><code>~/.peptide/datasets/dna_binding/train.csv</code></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
</div>
 

